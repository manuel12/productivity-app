/// <reference types="cypress" />

import React from "react"
import Todolist from "./TodoList"

describe("Todolist.tsx", () => {
  beforeEach(() => {
    cy.mount(<Todolist />)
  })

  it("should display a form with an input", () => {
    cy.get("[data-test=todos-form]").within(() => {
      cy.get("[data-test=todos-input]").should("be.visible")
    })
  })

  it("should display placeholder 'Add a new todo' on input", () => {
    cy.get("[data-test=todos-input]")
      .should("be.visible")
      .and("have.attr", "placeholder", "Add a new todo...")
  })

  it("should add a new todo by writing on the input and pressing ENTER", () => {
    cy.get("[data-test=todos-input]").type("Clean room{enter}")

    cy.get("[data-test=todos-item]").should("be.visible")
  })

  it("should display new todo below the input form", () => {
    cy.get("[data-test=todos-input]").type("Clean room{enter}")
    cy.get("[data-test=todos-item]").should("be.visible")
  })

  it("should display correct text on todo", () => {
    cy.get("[data-test=todos-input]").type("Clean room{enter}")
    cy.get("[data-test=todos-item]")
      .should("be.visible")
      .and("contain.text", "Clean room")
  })
})
